<form class="tormenta20 base custom-sheet" autocomplete="off">
	{{!-- Sheet Tab Navigation --}}
	<nav class="sheet-tabs tabs primary flexrow" data-group="primary">
		<a class="item" data-tab="attributes"><i class="fa-solid fa-file-invoice"></i> {{localize "T20.Sheet"}}</a>
		<a class="item" data-tab="journal"><i class="fas fa-book"></i> {{localize "T20.Journal"}}</a>
		<a class="item" data-tab="effects"><i class="fas fa-wand-magic-sparkles"></i> {{localize "T20.Effects"}}</a>
	</nav>

	{{!-- Sheet Body --}}
	<section class="sheet-body">
		{{!-- Attributes Tab --}}
		<div class="tab attributes" data-group="primary" data-tab="attributes">
			
			{{!-- Sheet Header --}}
			<div class="sheet-header">
				<img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
				<div class="header-fields">
					<h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="{{localize 'T20.Name'}}"/></h1>
					<div class="resource">
						<label>{{localize "T20.Level"}}:</label>
						<input type="number" name="system.attributes.nivel.value" value="{{system.attributes.nivel.value}}" min="1" max="20"/>
					</div>
				</div>
			</div>

			<div class="flexrow" style="gap: 15px;">
			<div class="attributes-left flexcol">
				{{!-- Abilities --}}
				<ul class="ability-scores flexrow">
					{{#each system.atributos as |atr key|}}
					<li class="ability" data-item-id="{{key}}">
						<h4 class="ability-name box-title rollable atributo-rollable">
							{{localize (lookup ../config.atributosAbr key)}}
						</h4>
						<span class="rollable atributo-rollable">
							<div class="atributo-value">{{numberFormat atr.value decimals=0 sign=true}}</div>
						</span>
						<footer class="attribute-footer flexrow">
							<input type="number" name="system.atributos.{{key}}.base" value="{{atr.base}}"
							title="{{ localize 'T20.AbilityBase'}}"/>
							<input type="number" name="system.atributos.{{key}}.bonus" value="{{atr.bonus}}" 
							title="{{ localize 'T20.AbilityBonus'}}" />
						</footer>
					</li>
					{{/each}}
				</ul>

				{{!-- HP/MP Resources --}}
				<div class="resources-main">
					<ul class="attributes flexrow">
						<li class="attribute resource">
							<h4 class="attribute-name box-title">{{localize "T20.HitPoints"}}</h4>
							<div class="attribute-value">
								<input type="number" name="system.attributes.pv.value" value="{{system.attributes.pv.value}}"
								placeholder="0" data-dtype="Number" min="0"/>
								<span class="value-slash">/</span>
								<input type="number" name="system.attributes.pv.max" value="{{system.attributes.pv.max}}"
								placeholder="0" data-dtype="Number" min="0"/>
							</div>
						</li>
						<li class="attribute resource">
							<h4 class="attribute-name box-title">{{localize "T20.ManaPoints"}}</h4>
							<div class="attribute-value">
								<input type="number" name="system.attributes.pm.value" value="{{system.attributes.pm.value}}"
								placeholder="0" data-dtype="Number" min="0"/>
								<span class="value-slash">/</span>
								<input type="number" name="system.attributes.pm.max" value="{{system.attributes.pm.max}}"
								placeholder="0" data-dtype="Number" min="0"/>
							</div>
						</li>
						<li class="attribute">
							<h4 class="attribute-name box-title">{{localize "T20.Defense"}}</h4>
							<div class="attribute-value">
								{{system.attributes.defesa.total}}
							</div>
						</li>
					</ul>
				</div>

				{{!-- Skills --}}
				<div class="skills-section">
					<h3>{{localize "T20.Skills"}}</h3>
					<ul class="skills-list">
						{{#each skills as |skill s|}}
						<li class="skill flexrow {{#if skill.exibir}}{{else}}hidden{{/if}}" data-item-id="{{skill.key}}">
							<input type="hidden" name="system.pericias.{{skill.key}}.value" value="{{skill.value}}" data-dtype="Number"/>
							<span class="skill-name rollable pericia-rollable">{{skill.label}}</span>
							<span class="skill-mod">{{numberFormat skill.total decimals=0 sign=true}}</span>
							<span class="skill-prof">{{{skill.symbol}}}</span>
						</li>
						{{/each}}
					</ul>
				</div>

				{{!-- Inventory Weapons --}}
				<div class="inventory-weapons">
					<h3>{{localize "T20.Weapons"}}</h3>
					<ul class="item-list">
						{{#each actor.items.armas as |item id|}}
						<li class="item flexrow" data-item-id="{{item._id}}">
							<img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
							<h4 class="item-name">{{item.name}}</h4>
							<div class="item-controls">
								<a class="item-control item-edit" title="{{localize 'T20.Edit'}}"><i class="fas fa-edit"></i></a>
								<a class="item-control item-delete" title="{{localize 'T20.Delete'}}"><i class="fas fa-trash"></i></a>
							</div>
						</li>
						{{/each}}
					</ul>
				</div>

				{{!-- Powers --}}
				<div class="list-powers">
					<h3>{{localize "T20.Powers"}}</h3>
					<ul class="item-list">
						{{#each actor.items.poderes as |item id|}}
						<li class="item flexrow" data-item-id="{{item._id}}">
							<img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
							<h4 class="item-name">{{item.name}}</h4>
							<div class="item-controls">
								<a class="item-control item-edit" title="{{localize 'T20.Edit'}}"><i class="fas fa-edit"></i></a>
								<a class="item-control item-delete" title="{{localize 'T20.Delete'}}"><i class="fas fa-trash"></i></a>
							</div>
						</li>
						{{/each}}
					</ul>
				</div>
			</div>

			<div class="attributes-right flexcol">
				{{!-- Inventory General --}}
				<div class="inventory-list">
					<h3>{{localize "T20.Inventory"}}</h3>
					<ul class="item-list">
						{{#each actor.items.equipamentos as |item id|}}
						<li class="item flexrow" data-item-id="{{item._id}}">
							<img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
							<h4 class="item-name">{{item.name}}</h4>
							<div class="item-controls">
								<a class="item-control item-edit" title="{{localize 'T20.Edit'}}"><i class="fas fa-edit"></i></a>
								<a class="item-control item-delete" title="{{localize 'T20.Delete'}}"><i class="fas fa-trash"></i></a>
							</div>
						</li>
						{{/each}}
					</ul>
				</div>
			</div>
			</div>
		</div>

		{{!-- Biography Tab --}}
		<div class="tab journal flexrow" data-group="primary" data-tab="journal">
			<div class="biography-section">
				<h3>{{localize "T20.Biography"}}</h3>
				{{editor htmlFields.biography target="system.detalhes.biography.value" button=true owner=owner editable=editable}}
			</div>
		</div>

		{{!-- Efeitos Tab --}}
		<div class="tab effects" data-group="primary" data-tab="effects">
			<div class="effects-section">
				<h3>{{localize "T20.Effects"}}</h3>
				<p>Seção de efeitos ativos será implementada aqui</p>
			</div>
		</div>
	</section>
</form>
